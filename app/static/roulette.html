<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Roulette Wheel</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: white;
        }
        #container {
            text-align: center;
        }
        #roulette {
            border: 8px solid #ffd700;
            border-radius: 50%;
            box-shadow: 0 0 30px rgba(255,215,0,0.5);
            cursor: pointer;
        }
        #result {
            margin-top: 20px;
            font-size: 24px;
            font-weight: bold;
        }
        #spinBtn {
            margin-top: 20px;
            padding: 15px 30px;
            font-size: 18px;
            background: #ffd700;
            color: #000;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
        }
        #spinBtn:hover {
            background: #ffed4a;
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div id="container">
        <h1>üé∞ –†—É–ª–µ—Ç–∫–∞</h1>
        <canvas id="roulette" width="400" height="400"></canvas>
        <br>
        <button id="spinBtn">üîÑ –ö–†–£–¢–ò–¢–¨</button>
        <div id="result">–í—ã–±–µ—Ä–∏—Ç–µ —á–∏—Å–ª–æ –∏ –∫—Ä—É—Ç–∏—Ç–µ!</div>
    </div>

    <script>
        const canvas = document.getElementById('roulette');
        const ctx = canvas.getContext('2d');
        const spinBtn = document.getElementById('spinBtn');
        const resultDiv = document.getElementById('result');

        // –ü–æ—Ä—è–¥–æ–∫ —á–∏—Å–µ–ª –Ω–∞ —Ä—É–ª–µ—Ç–∫–µ (–µ–≤—Ä–æ–ø–µ–π—Å–∫–∞—è)
        const numbers = [0, 32, 15, 19, 4, 21, 2, 25, 17, 34, 6, 27, 13, 36, 11, 30, 8, 23, 10, 5, 24, 16, 33, 1, 20, 14, 31, 9, 22, 18, 29, 7, 28, 12, 35, 3, 26];
        const redNumbers = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];

        let currentRotation = 0;
        let isSpinning = false;
        let userChoice = null;

        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ—Ç Python)
        function setUserChoice(choice) {
            userChoice = choice;
            resultDiv.textContent = `–í–∞—à –≤—ã–±–æ—Ä: ${choice} | –ù–∞–∂–º–∏—Ç–µ –ö–†–£–¢–ò–¢–¨!`;
        }

        // –ü–æ–ª—É—á–∏—Ç—å –≤—ã–∏–≥—Ä—ã—à–Ω–æ–µ —á–∏—Å–ª–æ
        function getWinningNumber(rotation) {
            const normalized = (rotation % 360 + 360) % 360;
            const sectorAngle = 360 / 37; // 37 —Å–µ–∫—Ç–æ—Ä–æ–≤
            const sectorIndex = Math.floor((360 - normalized) / sectorAngle) % 37;
            return numbers[sectorIndex];
        }

        function drawRoulette() {
            ctx.clearRect(0, 0, 400, 400);

            // –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å
            ctx.save();
            ctx.translate(200, 200);

            // –í—Ä–∞—â–µ–Ω–∏–µ —Ä—É–ª–µ—Ç–∫–∏
            ctx.rotate(-currentRotation * Math.PI / 180);

            // –†–∏—Å—É–µ–º —Å–µ–∫—Ç–æ—Ä–∞
            for(let i = 0; i < 37; i++) {
                const startAngle = (i / 37) * 2 * Math.PI;
                const endAngle = ((i + 1) / 37) * 2 * Math.PI;

                const num = numbers[i];
                const isRed = redNumbers.includes(num);
                const isUserChoice = num === userChoice;

                // –°–µ–∫—Ç–æ—Ä
                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.arc(0, 0, 170, startAngle, endAngle);
                ctx.closePath();

                // –¶–≤–µ—Ç —Å–µ–∫—Ç–æ—Ä–∞
                if(isUserChoice) {
                    ctx.fillStyle = '#ffd700'; // –ó–æ–ª–æ—Ç–æ–π –¥–ª—è –≤—ã–±–æ—Ä–∞
                } else if(isRed) {
                    ctx.fillStyle = '#cc0000';
                } else if(num === 0) {
                    ctx.fillStyle = '#00cc00';
                } else {
                    ctx.fillStyle = '#000000';
                }
                ctx.fill();

                // –ë–µ–ª–∞—è –≥—Ä–∞–Ω–∏—Ü–∞
                ctx.strokeStyle = '#ffffff';
                ctx.lineWidth = 1.5;
                ctx.stroke();

                // –¢–µ–∫—Å—Ç —á–∏—Å–ª–∞
                ctx.save();
                ctx.rotate(startAngle + (endAngle - startAngle) / 2);
                ctx.fillStyle = isUserChoice ? '#000' : '#ffffff';
                ctx.font = num <= 9 ? 'bold 20px Arial' : 'bold 16px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(num.toString(), 75, 0);
                ctx.restore();
            }

            ctx.restore();

            // –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫—Ä—É–≥
            ctx.fillStyle = '#ffd700';
            ctx.beginPath();
            ctx.arc(200, 200, 40, 0, 2 * Math.PI);
            ctx.fill();
            ctx.fillStyle = '#000';
            ctx.font = 'bold 18px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('üé∞', 200, 202);
        }

        // –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è
        function spinWheel() {
            if(isSpinning) return;

            isSpinning = true;
            spinBtn.disabled = true;
            spinBtn.textContent = 'üîÑ –ö–†–£–¢–ò–¢–°–Ø...';

            let spinSpeed = 25;
            let deceleration = 0.98;
            let animationFrame;

            function animate() {
                currentRotation += spinSpeed;
                spinSpeed *= deceleration;

                drawRoulette();

                if(spinSpeed > 0.5) {
                    animationFrame = requestAnimationFrame(animate);
                } else {
                    // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                    const finalRotation = currentRotation % 360;
                    const winningNumber = getWinningNumber(finalRotation);

                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Python —á–µ—Ä–µ–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä
                    const resultUrl = `data:text/plain;charset=utf-8,${winningNumber}`;
                    resultDiv.innerHTML = `
                        <strong>üéâ –†–ï–ó–£–õ–¨–¢–ê–¢: ${winningNumber}!</strong><br>
                        <a href="${resultUrl}" style="color: #ffd700;">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</a>
                    `;

                    spinBtn.disabled = false;
                    spinBtn.textContent = 'üîÑ –ö–†–£–¢–ò–¢–¨ –ï–©–ï';
                    isSpinning = false;
                    cancelAnimationFrame(animationFrame);
                }
            }

            animate();
        }

        spinBtn.addEventListener('click', spinWheel);

        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        drawRoulette();
    </script>
</body>
</html>
